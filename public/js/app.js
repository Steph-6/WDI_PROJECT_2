"use strict";var googleMap=googleMap||{},google=google;googleMap.mapSetup=function(){var e=14,o=document.getElementById("map-canvas"),t=new google.maps.LatLng(52.956163,(-1.159425)),n=google.maps.MapTypeId.ROADMAP;this.map=new google.maps.Map(o,{zoom:e,center:t,mapTypeId:n,zoomControl:!0,scaleControl:!0,minZoom:13,disableDefaultUI:!0,styles:[{featureType:"all",elementType:"labels.text.fill",stylers:[{saturation:36},{color:"#000000"},{lightness:40}]},{featureType:"all",elementType:"labels.text.stroke",stylers:[{visibility:"on"},{color:"#000000"},{lightness:16}]},{featureType:"all",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"administrative",elementType:"geometry.fill",stylers:[{color:"#000000"},{lightness:20}]},{featureType:"administrative",elementType:"geometry.stroke",stylers:[{color:"#000000"},{lightness:17},{weight:1.2}]},{featureType:"landscape",elementType:"geometry",stylers:[{color:"#000000"},{lightness:20}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#000000"},{lightness:21}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#000000"},{lightness:17}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#000000"},{lightness:29},{weight:.2}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#000000"},{lightness:18}]},{featureType:"road.local",elementType:"geometry",stylers:[{color:"#000000"},{lightness:16}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#000000"},{lightness:19}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#000000"},{lightness:17}]}]}),this.getCrimes(),this.getLights();var l=new google.maps.LatLngBounds(new google.maps.LatLng(52.957699,(-1.265336)),new google.maps.LatLng(52.954106,(-1.096938))),a=document.getElementById("origin-input"),r=document.getElementById("destination-input"),s={bounds:l};new google.maps.places.Autocomplete(a,s),new google.maps.places.Autocomplete(r,s)},googleMap.getLights=function(){var e=this;$.get("http://localhost:3000/lights").done(function(o){o.forEach(function(o){new google.maps.Marker({position:{lat:Number(o.lat),lng:Number(o.lng)},map:e.map,icon:{url:"/images/Glow1.png",scaledSize:new google.maps.Size(5,5),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(0,0)}})})})},googleMap.getCrimes=function(){var e=this;$.get("http://localhost:3000/crimes").done(function(o){o.forEach(function(o){var t=new google.maps.Marker({position:{lat:Number(o.lat),lng:Number(o.lng)},map:e.map,icon:{url:"images/red2.png",scaledSize:new google.maps.Size(10,10),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(0,0)}});e.addInfoWindowForCrime(o,t)})})},googleMap.addInfoWindowForCrime=function(e,o){var t=this;google.maps.event.addListener(o,"click",function(){"undefined"!=typeof t.infoWindow&&t.infoWindow.close(),t.infoWindow=new google.maps.InfoWindow({content:getCrimeInfo(e)}),t.infoWindow.open(t.map,o),t.map.setCenter(o.getPosition()),t.map.setZoom(16)})};var getCrimeInfo=function(e){var o=e.category.replace(/-/g," ");o=o.charAt(0).toUpperCase()+o.slice(1);var t=e.month.charAt(5)+e.month.charAt(6);return"01"===t?t="January":"02"===t?t="Febuary":"03"===t?t="March":"04"===t?t="April":"05"===t?t="May":"06"===t?t="June":"07"===t?t="July":"08"===t?t="August":"09"===t?t="September":"10"===t?t="October":"11"===t?t="November":"12"===t&&(t="December"),t="in "+t+" "+e.month.charAt(0)+e.month.charAt(1)+e.month.charAt(2)+e.month.charAt(3)+".","<div id='info'>"+o+", "+t+"</div>"};$(googleMap.mapSetup.bind(googleMap));